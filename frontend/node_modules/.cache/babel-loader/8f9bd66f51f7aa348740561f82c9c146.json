{"ast":null,"code":"import _toConsumableArray from\"/home/sergio.jberron/Desktop/Sprint 2/Trackete-main/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/sergio.jberron/Desktop/Sprint 2/Trackete-main/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/sergio.jberron/Desktop/Sprint 2/Trackete-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/sergio.jberron/Desktop/Sprint 2/Trackete-main/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component,useState,useEffect}from'react';import'./style.css';import{Link}from'react-router-dom';import{Button,Container}from'react-bootstrap';import Overview from\"./parcelList/Overview\";import Add from\"./parcelList/Add\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var PARCEL_ARRAY=[];var SHIP_NUMBER=\"\";var COMPANY=\"\";var NUMBER_ARRAY=[];var COMPANY_ARRAY=[];var _useState=useState(PARCEL_ARRAY),_useState2=_slicedToArray(_useState,2),parcel_array=_useState2[0],setParcelArray=_useState2[1];var _useState3=useState(SHIP_NUMBER),_useState4=_slicedToArray(_useState3,2),ship_number=_useState4[0],setShipNumber=_useState4[1];var _useState5=useState(COMPANY),_useState6=_slicedToArray(_useState5,2),company=_useState6[0],setCompany=_useState6[1];var _useState7=useState(NUMBER_ARRAY),_useState8=_slicedToArray(_useState7,2),number_array=_useState8[0],setNumberArray=_useState8[1];var _useState9=useState(COMPANY_ARRAY),_useState10=_slicedToArray(_useState9,2),company_array=_useState10[0],setCompanyArray=_useState10[1];useEffect(function(){// Update the document title using the browser API\ndocument.title=\"Home\";// Database Acesss\nfunction fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,myjson,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/ships/email/paco@gmail.com\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:myjson=_context.sent;data=[];data=myjson.map(function(parcel,i){return parcel.pedido;});setNumberArray(data);data=myjson.map(function(parcel,i){return parcel.company;});setCompanyArray(data);case 11:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function cargar(){var array=parcel_array;number_array.map(function(parcel,i){var shipment={\"shipnumber\":parcel,\"company\":company_array[i]};console.log(shipment);array=[].concat(_toConsumableArray(array),[shipment]);});setParcelArray(array);}function guardar(){return _guardar.apply(this,arguments);}function _guardar(){_guardar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var log;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:log={\"name\":\"melon\",\"email\":\"paco@gmail.com\",\"pass\":\"...\",\"company\":company,\"pedido\":ship_number,\"status\":\"...\",\"address\":\"...\"};_context2.next=3;return fetch('/ships',{method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(log)});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _guardar.apply(this,arguments);}function _handleShipNumber(a){setShipNumber(a);}function _handleCompany(a){//setCompany(a);\n}function uploadParcel(){return _uploadParcel.apply(this,arguments);}function _uploadParcel(){_uploadParcel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var options,response,myjson;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:options={method:'POST',headers:{Accept:'application/json','Content-Type':'application/json','aftership-api-key':'42b331b8-10fa-47e2-bb8e-659bd9555518'},body:JSON.stringify({tracking:{tracking_number:ship_number}})};_context3.next=3;return fetch('https://api.aftership.com/v4/trackings',options);case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:myjson=_context3.sent;setCompany(myjson.data.tracking.slug);case 8:case\"end\":return _context3.stop();}}},_callee3);}));return _uploadParcel.apply(this,arguments);}function saveParcel(){var shipment={\"shipnumber\":ship_number,\"company\":company};var array=[].concat(_toConsumableArray(parcel_array),[shipment]);guardar();setParcelArray(array);setShipNumber(\"\");setCompany(\"\");}return/*#__PURE__*/_jsxs(\"div\",{class:\"aside\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/images/Logo.png\",height:\"150\",widht:\"150\",alt:\"Image\",align:\"center\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(Button,{class:\"ghost\",children:\"Pedidos\"}),/*#__PURE__*/_jsx(Button,{children:\"Cerrar sesion\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"paco@gmail.com\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return cargar();},children:\"Cargar\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Add,{ship_number:ship_number,company:company,handleShipNumber:function handleShipNumber(a){return _handleShipNumber(a);},handleCompany:function handleCompany(a){return _handleCompany(a);},clickSearch:function clickSearch(){return uploadParcel();},clickSave:function clickSave(){return saveParcel();}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"col-12  mainPagecontainer \",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"blog-post-title\",children:\"Pedidos\"}),/*#__PURE__*/_jsx(\"div\",{class:\"aside\",children:/*#__PURE__*/_jsx(\"table\",{children:parcel_array.map(function(parcel,i){return/*#__PURE__*/_jsx(Overview,{index:i,number:parcel.shipnumber,company:parcel.company});})})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/images/LogoSinTexto.png\",height:\"150\",widht:\"150\",alt:\"Image\",align:\"center\"})]});}export default Home;","map":{"version":3,"sources":["/home/sergio.jberron/Desktop/Sprint 2/Trackete-main/frontend/src/Home.js"],"names":["React","Component","useState","useEffect","Link","Button","Container","Overview","Add","Home","PARCEL_ARRAY","SHIP_NUMBER","COMPANY","NUMBER_ARRAY","COMPANY_ARRAY","parcel_array","setParcelArray","ship_number","setShipNumber","company","setCompany","number_array","setNumberArray","company_array","setCompanyArray","document","title","fetchData","fetch","response","json","myjson","data","map","parcel","i","pedido","cargar","array","shipment","console","log","guardar","method","headers","body","JSON","stringify","handleShipNumber","a","handleCompany","uploadParcel","options","Accept","tracking","tracking_number","slug","saveParcel","process","env","PUBLIC_URL","shipnumber"],"mappings":"mlBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,SAArC,KAAsD,OAAtD,CACA,MAAO,aAAP,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,CAAiBC,SAAjB,KAAkC,iBAAlC,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,kBAAhB,C,wFAEA,QAASC,CAAAA,IAAT,EAAgB,CAEZ,GAAMC,CAAAA,YAAY,CAAG,EAArB,CACA,GAAMC,CAAAA,WAAW,CAAG,EAApB,CACA,GAAMC,CAAAA,OAAO,CAAG,EAAhB,CACA,GAAMC,CAAAA,YAAY,CAAG,EAArB,CACA,GAAMC,CAAAA,aAAa,CAAG,EAAtB,CAEA,cAAuCZ,QAAQ,CAAEQ,YAAF,CAA/C,wCAAOK,YAAP,eAAqBC,cAArB,eACA,eAAqCd,QAAQ,CAACS,WAAD,CAA7C,yCAAOM,WAAP,eAAoBC,aAApB,eACA,eAA8BhB,QAAQ,CAAEU,OAAF,CAAtC,yCAAOO,OAAP,eAAgBC,UAAhB,eACA,eAAuClB,QAAQ,CAAEW,YAAF,CAA/C,yCAAOQ,YAAP,eAAqBC,cAArB,eACA,eAAyCpB,QAAQ,CAACY,aAAD,CAAjD,0CAAOS,aAAP,gBAAsBC,eAAtB,gBAEArB,SAAS,CAAC,UAAM,CACZ;AACAsB,QAAQ,CAACC,KAAT,CAAiB,MAAjB,CAEA;AAJY,QAKGC,CAAAA,SALH,qIAKZ,kLAC2BC,CAAAA,KAAK,CAAC,6BAAD,CADhC,QACUC,QADV,qCAEyBA,CAAAA,QAAQ,CAACC,IAAT,EAFzB,QAEUC,MAFV,eAGQC,IAHR,CAGe,EAHf,CAIIA,IAAI,CAAGD,MAAM,CAACE,GAAP,CAAW,SAACC,MAAD,CAASC,CAAT,QAAeD,CAAAA,MAAM,CAACE,MAAtB,EAAX,CAAP,CACAd,cAAc,CAACU,IAAD,CAAd,CACAA,IAAI,CAAGD,MAAM,CAACE,GAAP,CAAW,SAACC,MAAD,CAASC,CAAT,QAAeD,CAAAA,MAAM,CAACf,OAAtB,EAAX,CAAP,CACAK,eAAe,CAACQ,IAAD,CAAf,CAPJ,uDALY,4CAcZL,SAAS,GACZ,CAfQ,CAeN,EAfM,CAAT,CAiBA,QAASU,CAAAA,MAAT,EAAiB,CACb,GAAIC,CAAAA,KAAK,CAAGvB,YAAZ,CACAM,YAAY,CAACY,GAAb,CAAiB,SAACC,MAAD,CAASC,CAAT,CAAe,CAC5B,GAAII,CAAAA,QAAQ,CAAG,CAAC,aAAeL,MAAhB,CAAwB,UAAYX,aAAa,CAACY,CAAD,CAAjD,CAAf,CACAK,OAAO,CAACC,GAAR,CAAYF,QAAZ,EACAD,KAAK,8BAAOA,KAAP,GAAcC,QAAd,EAAL,CACH,CAJD,EAKAvB,cAAc,CAACsB,KAAD,CAAd,CACH,CAvCW,QAyCGI,CAAAA,OAzCH,+HAyCZ,gJAEQD,GAFR,CAEc,CAAC,OAAO,OAAR,CAAgB,QAAS,gBAAzB,CAA2C,OAAQ,KAAnD,CAA0D,UAAWtB,OAArE,CACM,SAAUF,WADhB,CAC6B,SAAU,KADvC,CAC6C,UAAU,KADvD,CAFd,wBAIUW,CAAAA,KAAK,CAAC,QAAD,CAAW,CAClBe,MAAM,CAAE,MADU,CAElBC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAFS,CAMlBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,GAAf,CANY,CAAX,CAJf,yDAzCY,0CAuDZ,QAASO,CAAAA,iBAAT,CAA0BC,CAA1B,CAA4B,CACxB/B,aAAa,CAAC+B,CAAD,CAAb,CACH,CAED,QAASC,CAAAA,cAAT,CAAuBD,CAAvB,CAAyB,CACrB;AACH,CA7DW,QA+DGE,CAAAA,YA/DH,8IA+DZ,oKACUC,OADV,CACoB,CACZT,MAAM,CAAE,MADI,CAEZC,OAAO,CAAE,CACLS,MAAM,CAAE,kBADH,CAEL,eAAgB,kBAFX,CAGL,oBAAqB,sCAHhB,CAFG,CAOZR,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAACO,QAAQ,CAAE,CAACC,eAAe,CAAEtC,WAAlB,CAAX,CAAf,CAPM,CADpB,wBAW2BW,CAAAA,KAAK,CAAC,wCAAD,CAA2CwB,OAA3C,CAXhC,QAWUvB,QAXV,uCAYyBA,CAAAA,QAAQ,CAACC,IAAT,EAZzB,QAYUC,MAZV,gBAaIX,UAAU,CAACW,MAAM,CAACC,IAAP,CAAYsB,QAAZ,CAAqBE,IAAtB,CAAV,CAbJ,wDA/DY,+CA+EZ,QAASC,CAAAA,UAAT,EAAqB,CACjB,GAAIlB,CAAAA,QAAQ,CAAG,CAAC,aAAetB,WAAhB,CAA6B,UAAYE,OAAzC,CAAf,CACA,GAAImB,CAAAA,KAAK,8BAAOvB,YAAP,GAAqBwB,QAArB,EAAT,CACAG,OAAO,GACP1B,cAAc,CAACsB,KAAD,CAAd,CACApB,aAAa,CAAC,EAAD,CAAb,CACAE,UAAU,CAAC,EAAD,CAAV,CACH,CAED,mBACI,aAAK,KAAK,CAAC,OAAX,wBAEI,aAFJ,cAGI,aAHJ,cAII,aAJJ,cAMI,YAAK,GAAG,CAAEsC,OAAO,CAACC,GAAR,CAAYC,UAAZ,CAAyB,kBAAnC,CAAuD,MAAM,CAAC,KAA9D,CAAoE,KAAK,CAAC,KAA1E,CAAgF,GAAG,CAAC,OAApF,CAA4F,KAAK,CAAG,QAApG,EANJ,cAQI,aAAK,KAAK,CAAC,KAAX,wBACI,KAAC,MAAD,EAAQ,KAAK,CAAC,OAAd,qBADJ,cAEI,KAAC,MAAD,4BAFJ,GARJ,cAcI,aAdJ,cAeI,aAfJ,cAiBI,aAAK,KAAK,CAAC,KAAX,wBACI,qCADJ,cAEI,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMvB,CAAAA,MAAM,EAAZ,EAAjB,oBAFJ,GAjBJ,cAsBI,aAtBJ,cAuBI,aAvBJ,cAyBI,KAAC,GAAD,EAAK,WAAW,CAAEpB,WAAlB,CAA+B,OAAO,CAAEE,OAAxC,CAAiD,gBAAgB,CAAE,0BAAA8B,CAAC,QAAID,CAAAA,iBAAgB,CAACC,CAAD,CAApB,EAApE,CACI,aAAa,CAAE,uBAAAA,CAAC,QAAIC,CAAAA,cAAa,CAACD,CAAD,CAAjB,EADpB,CAC0C,WAAW,CAAE,6BAAME,CAAAA,YAAY,EAAlB,EADvD,CAC6E,SAAS,CAAE,2BAAKM,CAAAA,UAAU,EAAf,EADxF,EAzBJ,cA4BI,aA5BJ,cA8BI,aAAK,KAAK,CAAC,4BAAX,wBACI,WAAI,KAAK,CAAC,iBAAV,qBADJ,cAGI,YAAK,KAAK,CAAC,OAAX,uBACI,uBACC1C,YAAY,CAACkB,GAAb,CAAiB,SAACC,MAAD,CAASC,CAAT,CAAe,CAAC,mBAAQ,KAAC,QAAD,EAAU,KAAK,CAAIA,CAAnB,CAAsB,MAAM,CAAED,MAAM,CAAC2B,UAArC,CACtC,OAAO,CAAE3B,MAAM,CAACf,OADsB,EAAR,CACF,CAD/B,CADD,EADJ,EAHJ,GA9BJ,cAyCI,aAzCJ,cA0CI,aA1CJ,cA4CI,YAAK,GAAG,CAAEuC,OAAO,CAACC,GAAR,CAAYC,UAAZ,CAAyB,0BAAnC,CAA+D,MAAM,CAAC,KAAtE,CAA4E,KAAK,CAAC,KAAlF,CAAwF,GAAG,CAAC,OAA5F,CAAoG,KAAK,CAAG,QAA5G,EA5CJ,GADJ,CAmDD,CAGH,cAAenD,CAAAA,IAAf","sourcesContent":["import React, { Component, useState, useEffect } from 'react';\nimport './style.css';\nimport { Link } from 'react-router-dom';\nimport { Button, Container } from 'react-bootstrap';\nimport Overview from \"./parcelList/Overview\";\nimport Add from \"./parcelList/Add\";\n\nfunction Home() {\n\n    const PARCEL_ARRAY = [];\n    const SHIP_NUMBER = \"\";\n    const COMPANY = \"\";\n    const NUMBER_ARRAY = [];\n    const COMPANY_ARRAY = [];\n\n    const [parcel_array, setParcelArray] = useState (PARCEL_ARRAY);\n    const [ship_number, setShipNumber] = useState(SHIP_NUMBER);\n    const [company, setCompany] = useState (COMPANY);\n    const [number_array, setNumberArray] = useState (NUMBER_ARRAY);\n    const [company_array, setCompanyArray] = useState(COMPANY_ARRAY);\n\n    useEffect(() => {\n        // Update the document title using the browser API\n        document.title = \"Home\";\n        \n        // Database Acesss\n        async function fetchData(){\n            const response = await fetch(\"/ships/email/paco@gmail.com\");\n            const myjson = await response.json();\n            var data = []; \n            data = myjson.map((parcel, i) => parcel.pedido);\n            setNumberArray(data);\n            data = myjson.map((parcel, i) => parcel.company);\n            setCompanyArray(data);\n        }\n        fetchData();\n    }, []);\n\n    function cargar(){\n        var array = parcel_array;\n        number_array.map((parcel, i) => {\n            var shipment = {\"shipnumber\" : parcel, \"company\" : company_array[i]};\n            console.log(shipment);\n            array = [...array, shipment];\n        })\n        setParcelArray(array);\n    }\n\n    async function guardar(){\n        \n        var log = {\"name\":\"melon\",\"email\": \"paco@gmail.com\", \"pass\": \"...\", \"company\": company, \n                        \"pedido\": ship_number, \"status\": \"...\",\"address\":\"...\"};\n        await fetch('/ships', {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(log)\n        });\n    }\n\n    function handleShipNumber(a){\n        setShipNumber(a);\n    }\n\n    function handleCompany(a){\n        //setCompany(a);\n    }\n\n    async function uploadParcel(){\n        const options = {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'aftership-api-key': '42b331b8-10fa-47e2-bb8e-659bd9555518'\n            },\n            body: JSON.stringify({tracking: {tracking_number: ship_number}})\n        };\n            \n        const response = await fetch('https://api.aftership.com/v4/trackings', options);\n        const myjson = await response.json();\n        setCompany(myjson.data.tracking.slug);\n    }\n\n    function saveParcel(){\n        var shipment = {\"shipnumber\" : ship_number, \"company\" : company};\n        var array = [...parcel_array, shipment];\n        guardar();\n        setParcelArray(array);\n        setShipNumber(\"\");\n        setCompany(\"\");\n    }\n\n    return (\n        <div class=\"aside\">\n\n            <br></br>\n            <br></br>\n            <br></br>\n\n            <img src={process.env.PUBLIC_URL + \"/images/Logo.png\"} height=\"150\" widht=\"150\" alt=\"Image\" align = \"center\"></img>\n\n            <div class=\"row\">\n                <Button class=\"ghost\">Pedidos</Button>\n                <Button>Cerrar sesion</Button>\n                \n            </div>\n   \n            <br></br>\n            <br></br>\n\n            <div class=\"row\">\n                <p>paco@gmail.com</p>\n                <Button onClick={() => cargar()}>Cargar</Button>\n            </div>\n\n            <br></br>\n            <br></br>\n\n            <Add ship_number={ship_number} company={company} handleShipNumber={a => handleShipNumber(a)} \n                handleCompany={a => handleCompany(a)} clickSearch={() => uploadParcel()} clickSave={()=> saveParcel()}/>\n\n            <br></br>\n\n            <div class=\"col-12  mainPagecontainer \">\n                <h2 class=\"blog-post-title\">Pedidos</h2>\n\n                <div class=\"aside\">\n                    <table>\n                    {parcel_array.map((parcel, i) => {return (<Overview index = {i} number={parcel.shipnumber} \n                        company={parcel.company}/>)})}\n                    </table>\n                </div>   \n            </div>\n\n            <br></br>\n            <br></br>\n\n            <img src={process.env.PUBLIC_URL + \"/images/LogoSinTexto.png\"} height=\"150\" widht=\"150\" alt=\"Image\" align = \"center\"/>            \n\n        </div>    \n\n\n    );\n  }\n\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}