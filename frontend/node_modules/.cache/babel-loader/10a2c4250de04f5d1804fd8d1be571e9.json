{"ast":null,"code":"import _toConsumableArray from\"/Users/garra/Desktop/Trackete/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/garra/Desktop/Trackete/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/garra/Desktop/Trackete/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/garra/Desktop/Trackete/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component,useState,useEffect}from'react';import'./style.css';import{Link,useLocation}from'react-router-dom';import{Button,Container}from'react-bootstrap';import Overview from\"./parcelList/Overview\";import Add from\"./parcelList/Add\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var PARCEL_ARRAY=[];var SHIP_NUMBER=\"\";var COMPANY=\"\";var NUMBER_ARRAY=[];var COMPANY_ARRAY=[];var DETAILS=false;var _useState=useState(PARCEL_ARRAY),_useState2=_slicedToArray(_useState,2),parcel_array=_useState2[0],setParcelArray=_useState2[1];var _useState3=useState(SHIP_NUMBER),_useState4=_slicedToArray(_useState3,2),ship_number=_useState4[0],setShipNumber=_useState4[1];var _useState5=useState(COMPANY),_useState6=_slicedToArray(_useState5,2),company=_useState6[0],setCompany=_useState6[1];var _useState7=useState(NUMBER_ARRAY),_useState8=_slicedToArray(_useState7,2),number_array=_useState8[0],setNumberArray=_useState8[1];var _useState9=useState(COMPANY_ARRAY),_useState10=_slicedToArray(_useState9,2),company_array=_useState10[0],setCompanyArray=_useState10[1];var _useState11=useState(DETAILS),_useState12=_slicedToArray(_useState11,2),details=_useState12[0],setDetails=_useState12[1];var location=useLocation();var email=location.state.email;//const name = location.state.name;\nuseEffect(function(){// Update the document title using the browser API\ndocument.title=\"Home\";// Database Acesss\nfunction fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,myjson;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/ships/\"+email);case 2:response=_context.sent;_context.next=5;return response.json();case 5:myjson=_context.sent;setNumberArray(myjson.pedidos.split(\",\"));setCompanyArray(myjson.compañias.split(\",\"));case 8:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function cargar(){var array=parcel_array;number_array.map(function(parcel,i){var shipment={\"shipnumber\":parcel,\"company\":company_array[i]};console.log(shipment);array=[].concat(_toConsumableArray(array),[shipment]);});setParcelArray(array);console.log(array);}function guardar(){return _guardar.apply(this,arguments);}function _guardar(){_guardar=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var string1,string2,log,link;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:string1=\"\";parcel_array.map(function(parcel,i){string1=string1+\",\"+parcel.shipnumber.toString();});string2=\"\";parcel_array.map(function(parcel,i){string2=string2+\",\"+parcel.company.toString();});log={\"pedidos\":string1,\"compañias\":string2};link='/ships/'+email;//console.log(link);\n_context2.next=8;return fetch(link,{method:'PUT',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(log)});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _guardar.apply(this,arguments);}function _handleShipNumber(a){setShipNumber(a);}function _handleCompany(a){//setCompany(a);\n}function uploadParcel(){return _uploadParcel.apply(this,arguments);}function _uploadParcel(){_uploadParcel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var options,response,myjson;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:options={method:'POST',headers:{Accept:'application/json','Content-Type':'application/json','aftership-api-key':'dc14c141-9b50-4470-b510-b1c164cf79a8'},body:JSON.stringify({tracking:{tracking_number:ship_number}})};console.log(options);_context3.next=4;return fetch('https://api.aftership.com/v4/trackings',options);case 4:response=_context3.sent;console.log(response);_context3.next=8;return response.json();case 8:myjson=_context3.sent;setCompany(myjson.data.tracking.slug);case 10:case\"end\":return _context3.stop();}}},_callee3);}));return _uploadParcel.apply(this,arguments);}function uploadParcel2(){return _uploadParcel2.apply(this,arguments);}function _uploadParcel2(){_uploadParcel2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var options,response,myjson;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:options={method:'POST',headers:{Accept:'application/json','Content-Type':'application/json','Tracking-Api-Key':'5t7cf0b0-o958-r2k1-fdr9-fytkx05xeast'},body:\"{\\\"tracking_number\\\":\\\"\".concat(ship_number,\"\\\"}\")};_context4.next=3;return fetch('https://api.trackingmore.com/v3/trackings/detect',options);case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:myjson=_context4.sent;setCompany(myjson.data.courier_name);case 8:case\"end\":return _context4.stop();}}},_callee4);}));return _uploadParcel2.apply(this,arguments);}function saveParcel(){var shipment={\"shipnumber\":ship_number,\"company\":company};var array=[].concat(_toConsumableArray(parcel_array),[shipment]);setParcelArray(array);//guardar();\nsetShipNumber(\"\");setCompany(\"\");}function seeDetails(){setDetails(!details);}var UPSTRUE=true;var SEURTRUE=true;var MRWTRUE=true;var DHLTRUE=true;var CORREOSTRUE=true;var _useState13=useState(UPSTRUE),_useState14=_slicedToArray(_useState13,2),upsTrue=_useState14[0],setUpsTrue=_useState14[1];var _useState15=useState(SEURTRUE),_useState16=_slicedToArray(_useState15,2),seurTrue=_useState16[0],setSeurTrue=_useState16[1];var _useState17=useState(MRWTRUE),_useState18=_slicedToArray(_useState17,2),mrwTrue=_useState18[0],setMrwTrue=_useState18[1];var _useState19=useState(DHLTRUE),_useState20=_slicedToArray(_useState19,2),dhlTrue=_useState20[0],setDhlTrue=_useState20[1];return/*#__PURE__*/_jsxs(\"div\",{class:\"login\",children:[/*#__PURE__*/_jsx(\"br\",{}),\"            \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"            \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"            \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"            \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"            \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"            \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+\"/images/Logo.png\",height:\"150\",widht:\"150\",alt:\"Image\",align:\"center\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\xA1Bienvenido \",email,\" !\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return cargar();},children:\"Cargar\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Add,{ship_number:ship_number,company:company,handleShipNumber:function handleShipNumber(a){return _handleShipNumber(a);},handleCompany:function handleCompany(a){return _handleCompany(a);},clickSearch:function clickSearch(){return uploadParcel();},clickSave:function clickSave(){return saveParcel();}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"col-12  mainPagecontainer \",children:[/*#__PURE__*/_jsx(\"h2\",{class:\"blog-post-title\",children:\"Pedidos\"}),/*#__PURE__*/_jsxs(\"div\",{align:\"center\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,value:upsTrue,onChange:function onChange(e){return setUpsTrue(!upsTrue);}}),\"UPS\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,value:seurTrue,onChange:function onChange(e){return setSeurTrue(!seurTrue);}}),\"SEUR\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,value:mrwTrue,onChange:function onChange(e){return setSeurTrue(!mrwTrue);}}),\"MRW\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,value:dhlTrue,onChange:function onChange(e){return setSeurTrue(!dhlTrue);}}),\"DHL\"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:true,value:\"correosTrue\",onChange:function onChange(e){return setSeurTrue();}}),\"Correos\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"table\",{children:parcel_array.map(function(parcel,i){var aux=true;if(parcel.company==\"ups\"){aux=upsTrue;}else{aux=true;}if(aux){return/*#__PURE__*/_jsx(Overview,{index:i,number:parcel.shipnumber,company:parcel.company,details:details,clickDetails:function clickDetails(){return seeDetails();}});}else{return/*#__PURE__*/_jsx(\"div\",{});}})})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return guardar();},children:/*#__PURE__*/_jsx(Link,{to:\"/Login\",children:\"Cerrar sesion\"})})})]});}export default Home;","map":{"version":3,"sources":["/Users/garra/Desktop/Trackete/frontend/src/Home.js"],"names":["React","Component","useState","useEffect","Link","useLocation","Button","Container","Overview","Add","Home","PARCEL_ARRAY","SHIP_NUMBER","COMPANY","NUMBER_ARRAY","COMPANY_ARRAY","DETAILS","parcel_array","setParcelArray","ship_number","setShipNumber","company","setCompany","number_array","setNumberArray","company_array","setCompanyArray","details","setDetails","location","email","state","document","title","fetchData","fetch","response","json","myjson","pedidos","split","compañias","cargar","array","map","parcel","i","shipment","console","log","guardar","string1","shipnumber","toString","string2","link","method","headers","body","JSON","stringify","handleShipNumber","a","handleCompany","uploadParcel","options","Accept","tracking","tracking_number","data","slug","uploadParcel2","courier_name","saveParcel","seeDetails","UPSTRUE","SEURTRUE","MRWTRUE","DHLTRUE","CORREOSTRUE","upsTrue","setUpsTrue","seurTrue","setSeurTrue","mrwTrue","setMrwTrue","dhlTrue","setDhlTrue","process","env","PUBLIC_URL","e","aux"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react';\nimport './style.css';\nimport { Link , useLocation} from 'react-router-dom';\nimport { Button, Container } from 'react-bootstrap';\nimport Overview from \"./parcelList/Overview\";\nimport Add from \"./parcelList/Add\";\n\nfunction Home() {\n\n    const PARCEL_ARRAY = [];\n    const SHIP_NUMBER = \"\";\n    const COMPANY = \"\";\n    const NUMBER_ARRAY = [];\n    const COMPANY_ARRAY = [];\n    const DETAILS = false;\n\n    const [parcel_array, setParcelArray] = useState (PARCEL_ARRAY);\n    const [ship_number, setShipNumber] = useState(SHIP_NUMBER);\n    const [company, setCompany] = useState (COMPANY);\n    const [number_array, setNumberArray] = useState (NUMBER_ARRAY);\n    const [company_array, setCompanyArray] = useState(COMPANY_ARRAY);\n    const [details, setDetails] = useState(DETAILS);\n\n    \n\n    const location = useLocation();\n    const email = location.state.email;\n    //const name = location.state.name;\n\n\n    useEffect(() => {\n        // Update the document title using the browser API\n        document.title = \"Home\";\n        \n        // Database Acesss\n        async function fetchData(){\n            const response = await fetch(\"/ships/\" + email);\n            const myjson = await response.json();\n            setNumberArray(myjson.pedidos.split(\",\"));\n            setCompanyArray(myjson.compañias.split(\",\"));\n            \n        }\n        fetchData();\n    }, []);\n\n    function cargar(){  \n        var array = parcel_array;\n        number_array.map((parcel, i) => {\n            var shipment = {\"shipnumber\" : parcel, \"company\" : company_array[i]};\n            console.log(shipment);\n            array = [...array, shipment];\n        })\n        setParcelArray(array);\n        console.log(array);\n    }\n\n    async function guardar(){\n        var string1 = \"\";\n        parcel_array.map((parcel,i) => {string1 = string1 + \",\" + parcel.shipnumber.toString()});\n        var string2 = \"\";\n        parcel_array.map((parcel,i) => {string2 = string2 + \",\" + parcel.company.toString()});\n        var log = {\"pedidos\" : string1, \"compañias\" : string2 };\n        const link = '/ships/' + email;\n        //console.log(link);\n        await fetch(link, {\n            method: 'PUT',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(log)\n        });\n    }\n\n    function handleShipNumber(a){\n        setShipNumber(a);\n    }\n\n    function handleCompany(a){\n        //setCompany(a);\n    }\n\n    async function uploadParcel(){\n        const options = {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'aftership-api-key': 'dc14c141-9b50-4470-b510-b1c164cf79a8'\n            },\n            body: JSON.stringify({tracking: {tracking_number: ship_number}})\n        };\n        console.log(options);\n        const response = await fetch('https://api.aftership.com/v4/trackings', options);\n        console.log(response);\n        const myjson = await response.json();\n        setCompany(myjson.data.tracking.slug);\n    }\n\n    async function uploadParcel2(){\n        const options = {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Tracking-Api-Key':'5t7cf0b0-o958-r2k1-fdr9-fytkx05xeast'\n            },\n            body: `{\\\"tracking_number\\\":\\\"${ship_number}\\\"}`\n        };\n            \n        const response = await fetch('https://api.trackingmore.com/v3/trackings/detect', options);\n        const myjson = await response.json();\n        setCompany(myjson.data.courier_name);\n    }\n\n    function saveParcel(){\n        var shipment = {\"shipnumber\" : ship_number, \"company\" : company};\n        var array = [...parcel_array, shipment];\n        setParcelArray(array);\n        //guardar();\n        setShipNumber(\"\");\n        setCompany(\"\");\n    }\n\n    function seeDetails(){\n        setDetails(!details);\n    }\n\n    const UPSTRUE = true;\n    const SEURTRUE = true;\n    const MRWTRUE = true;\n    const DHLTRUE = true;\n    const CORREOSTRUE = true;\n   \n    const [upsTrue, setUpsTrue] = useState(UPSTRUE);\n    const [seurTrue, setSeurTrue] = useState(SEURTRUE);\n    const [mrwTrue, setMrwTrue] = useState(MRWTRUE);\n    const [dhlTrue, setDhlTrue] = useState(DHLTRUE);\n    \n\n\n    return (\n        <div class=\"login\">\n          \n            <br></br>            <br></br>\n            <br></br>            <br></br>\n            <br></br>            <br></br>\n            <br></br>            <br></br>\n            <br></br>            <br></br>\n            <br></br>            <br></br>\n            <br></br>\n            <h2><img src={process.env.PUBLIC_URL + \"/images/Logo.png\"} height=\"150\" widht=\"150\" alt=\"Image\" align = \"center\"></img></h2>\n\n\n   \n            <br></br>\n            <br></br>\n\n            <div class=\"row\">\n                <h3>¡Bienvenido {email} !</h3>\n                <button type='button' onClick={() => cargar()}>Cargar</button>\n            </div>\n\n            <br></br>\n            <br></br>\n\n            <Add ship_number={ship_number} company={company} handleShipNumber={a => handleShipNumber(a)} \n                handleCompany={a => handleCompany(a)} clickSearch={() => uploadParcel()} clickSave={()=> saveParcel()}/>\n\n            <br></br>\n\n            <div class=\"col-12  mainPagecontainer \">\n                <h2 class=\"blog-post-title\">Pedidos</h2>\n                <div align=\"center\">\n                    <label><input type=\"checkbox\" checked = {true} value={upsTrue} onChange={e => setUpsTrue(!upsTrue)}/>UPS</label>\n                    <label><input type=\"checkbox\" checked = {true} value= {seurTrue} onChange={e => setSeurTrue(!seurTrue)}/>SEUR</label>\n                    <label><input type=\"checkbox\" checked = {true} value= {mrwTrue} onChange={e => setSeurTrue(!mrwTrue)}/>MRW</label>\n                    <label><input type=\"checkbox\" checked = {true} value= {dhlTrue} onChange={e => setSeurTrue(!dhlTrue)}/>DHL</label>\n                    <label><input type=\"checkbox\" checked = {true} value= \"correosTrue\" onChange={e => setSeurTrue()}/>Correos</label>\n\n                </div>\n\n                <div>\n                    <table>\n                    {parcel_array.map((parcel, i) => {\n                        var aux = true\n                        if(parcel.company==\"ups\"){aux = upsTrue}\n                        else{aux = true}\n                                                if(aux){\n                            return (<Overview index = {i} number={parcel.shipnumber} \n                                company={parcel.company} details = {details} clickDetails={() => seeDetails()}/>)}\n                        else {return <div></div>}})}\n                    </table>\n                </div>   \n            </div>\n     <div >\n            <button type='button' onClick={() => guardar()}><Link to=\"/Login\" >Cerrar sesion</Link></button>                \n     </div>\n        </div>  \n\n\n\n\n    );\n  }\n\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}